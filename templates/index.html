<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parc Astérix</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --ig-primary: #262626;
            --ig-secondary: #fafafa;
            --ig-border: #dbdbdb;
            --ig-blue: #0095f6;
            --ig-red: #ed4956;
            --ig-green: #4cb5ab;
            --ig-yellow: #ffc107;
            --ig-gradient-start: #405de6;
            --ig-gradient-mid: #5851db;
            --ig-gradient-end: #833ab4;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            color: var(--ig-primary);
            background: var(--ig-secondary);
            padding-bottom: 80px;
            max-width: 100%;
            overflow-x: hidden;
        }
        
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            border-bottom: 1px solid var(--ig-border);
            background: white;
            position: sticky;
            top: 0;
            z-index: 100;
            width: 100%;
            box-sizing: border-box;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 600;
            background: linear-gradient(to right, var(--ig-gradient-start), var(--ig-gradient-end));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .refresh-btn {
            background: var(--ig-blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 0.85rem;
            white-space: nowrap;
        }
        
        .refresh-btn i {
            margin-right: 6px;
        }
        
        .update-info {
            text-align: center;
            font-size: 0.8rem;
            color: #8e8e8e;
            margin: 10px 0;
            padding: 0 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            width: 100%;
            box-sizing: border-box;
        }
        
        .freshness-indicator {
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .freshness-recent {
            background-color: var(--ig-green);
            color: white;
        }
        
        .freshness-medium {
            background-color: var(--ig-yellow);
            color: black;
        }
        
        .freshness-old {
            background-color: var(--ig-red);
            color: white;
        }
        
        .freshness-unknown {
            background-color: #8e8e8e;
            color: white;
        }
        
        .category {
            margin: 10px 16px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            width: calc(100% - 32px);
            box-sizing: border-box;
        }
        
        .category-header {
            padding: 12px 16px;
            border-bottom: 1px solid var(--ig-border);
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .category-header .emoji {
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .ride {
            display: flex;
            flex-direction: column;
            padding: 14px 16px;
            border-bottom: 1px solid var(--ig-border);
        }
        
        .ride:last-child {
            border-bottom: none;
        }
        
        .ride-top {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }
        
        .ride-name {
            font-weight: 500;
        }
        
        .wait {
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .wait i {
            margin-right: 6px;
        }
        
        .difficulty {
            font-size: 0.8rem;
            color: #8e8e8e;
            padding-left: 2px;
        }
        
        .open {
            color: var(--ig-green);
        }
        
        .closed {
            color: var(--ig-red);
        }
        
        .difficulty-extreme {
            color: var(--ig-red);
        }
        
        .difficulty-hard {
            color: var(--ig-red);
        }
        
        .difficulty-medium {
            color: var(--ig-yellow);
        }
        
        .difficulty-easy {
            color: var(--ig-green);
        }
        
        /* Nouvelles fonctionnalités */
        .header-actions {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .icon-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--ig-primary);
            cursor: pointer;
            padding: 8px;
            margin-left: 8px;
            border-radius: 8px;
            padding: 1px 4px;
        }
        
        .icon-btn.active {
            color: var(--ig-blue);
            position: relative;
        }
        
        .auto-refresh-indicator {
            font-size: 0.6rem;
            font-weight: bold;
            position: absolute;
            bottom: 0;
            right: 0;
            background-color: var(--ig-blue);
            color: white;
            border-radius: 8px;
            padding: 1px 4px;
        }
        
        .search-container {
            padding: 0 16px;
            margin-top: 10px;
            width: 100%;
            box-sizing: border-box;
            border-bottom: 1px solid var(--ig-border);
        }
        
        .search-box {
            position: relative;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .search-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #8e8e8e;
        }
        
        #search-input {
            width: 100%;
            padding: 10px 10px 10px 35px;
            border: 1px solid var(--ig-border);
            border-radius: 8px;
            font-size: 0.9rem;
            box-sizing: border-box;
        }
        
        .filter-options, .category-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
            padding-bottom: 5px;
        }
        
        .filter-btn, .category-btn {
            background: white;
            border: 1px solid var(--ig-border);
            border-radius: 8px;
            padding: 6px 8px;
            font-size: 0.85rem;
            cursor: pointer;
            white-space: nowrap;
            margin-bottom: 4px;
        }
        
        .filter-btn.active, .category-btn.active {
            background: var(--ig-blue);
            color: white;
            border-color: var(--ig-blue);
        }
        
        .category-filters {
            margin-top: 8px;
        }
        
        .category-btn[data-category="sensations"] {
            border-color: var(--ig-red);
            color: var(--ig-red);
        }
        
        .category-btn[data-category="sensations"].active {
            background: var(--ig-red);
            color: white;
        }
        
        .category-btn[data-category="familles"] {
            border-color: var(--ig-blue);
            color: var(--ig-blue);
        }
        
        .category-btn[data-category="familles"].active {
            background: var(--ig-blue);
            color: white;
        }
        
        .category-btn[data-category="enfants"] {
            border-color: var(--ig-green);
            color: var(--ig-green);
        }
        
        .category-btn[data-category="enfants"].active {
            background: var(--ig-green);
            color: white;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* Mode sombre */
        body.dark-mode {
            background: #121212;
            color: #e0e0e0;
        }
        
        body.dark-mode .header,
        body.dark-mode .search-container,
        body.dark-mode .category,
        body.dark-mode #search-input,
        body.dark-mode .filter-btn {
            background: #1e1e1e;
            border-color: #333;
        }
        
        body.dark-mode .ride {
            border-color: #333;
        }
        
        body.dark-mode .icon-btn,
        body.dark-mode .ride-name {
            color: #e0e0e0;
        }
        
        body.dark-mode #search-input {
            color: #e0e0e0;
        }
        
        body.dark-mode .filter-btn {
            color: #e0e0e0;
        }
        
        /* Styles pour les blagues cachées */
        .easter-egg-tooltip {
            display: none;
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            z-index: 100;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            pointer-events: none;
        }
        
        #logo-easter-egg:hover .easter-egg-tooltip,
        #refresh-joke:hover .easter-egg-tooltip,
        #sensations-header:hover .easter-egg-tooltip,
        #familles-header:hover .easter-egg-tooltip,
        #enfants-header:hover .easter-egg-tooltip,
        #autres-header:hover .easter-egg-tooltip {
            display: block;
        }
        
        .hidden-joke {
            font-size: 0.7rem;
            color: var(--ig-secondary);
            cursor: pointer;
            margin-top: 5px;
            transition: color 0.3s;
        }
        
        .hidden-joke:hover {
            color: var(--ig-blue);
        }
        
        /* Animation pour la potion magique */
        @keyframes potionEffect {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .potion-active {
            animation: potionEffect 0.5s ease;
        }
        
        /* Styles pour les pop-ups d'attractions */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal {
            background-color: white;
            border-radius: 12px;
            max-width: 90%;
            width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }
        
        .modal-close:hover {
            color: var(--ig-red);
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
            padding-right: 30px;
        }
        
        .modal-level {
            font-weight: 600;
            margin-bottom: 15px;
            display: block;
        }
        
        .modal-level.extreme {
            color: var(--ig-red);
        }
        
        .modal-level.very-strong {
            color: #ff4500;
        }
        
        .modal-level.strong {
            color: #ff8c00;
        }
        
        .modal-level.medium {
            color: var(--ig-yellow);
        }
        
        .modal-description {
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        body.dark-mode .modal {
            background-color: #1e1e1e;
            color: #e0e0e0;
        }
        
        .ride {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .ride:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo" id="logo-easter-egg">
            <i class="fas fa-hat-wizard"></i> Parc Astérix
            <span class="easter-egg-tooltip">Par Toutatis !</span>
        </div>
        <div class="header-actions">
            <button id="dark-mode-toggle" class="icon-btn">
                <i class="fas fa-moon"></i>
            </button>
            <button class="refresh-btn" onclick="window.location.reload();" id="refresh-joke">
                <i class="fas fa-sync-alt"></i> Actualiser
                <span class="easter-egg-tooltip">Attention aux Romains qui rechargent la page !</span>
            </button>
            <button id="auto-refresh-toggle" class="icon-btn" title="Activer/désactiver le rafraîchissement automatique">
                <i class="fas fa-clock"></i>
            </button>
        </div>
    </div>
    
    <div class="search-container">
        <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="search-input" placeholder="Chercher un Romain... euh, une attraction...">
        </div>
        <div class="filter-options">
            <button class="filter-btn active" data-sort="default">Par défaut</button>
            <button class="filter-btn" data-sort="wait">Temps d'attente</button>
            <button class="filter-btn" data-sort="difficulty">Difficulté</button>
        </div>
        <div class="category-filters">
            <button class="category-btn active" data-category="all">Toutes</button>
            <button class="category-btn" data-category="sensations">Sensations fortes</button>
            <button class="category-btn" data-category="familles">Familiales</button>
            <button class="category-btn" data-category="enfants">Petits Gaulois</button>
            <button class="category-btn" data-category="autres">Autres</button>
        </div>
    </div>
    
    <div class="update-info">
        Dernière mise à jour : {{ last_updated }}
        <span class="freshness-indicator freshness-{{ data_freshness }}">
            {% if data_freshness == 'recent' %}
                <i class="fas fa-check-circle"></i> Données récentes (fraîches comme le poisson d'Ordralfabétix !)
            {% elif data_freshness == 'medium' %}
                <i class="fas fa-exclamation-circle"></i> Données de moins d'une heure (comme la sieste d'Obélix)
            {% elif data_freshness == 'old' %}
                <i class="fas fa-exclamation-triangle"></i> Données anciennes (plus vieilles que Panoramix)
            {% else %}
                <i class="fas fa-question-circle"></i> Fraîcheur inconnue (comme la recette de la potion magique)
            {% endif %}
        </span>
        <span class="hidden-joke" id="potion-joke">Cliquez ici pour une dose de potion magique !</span>
    </div>

    <div class="category" data-category="sensations">
        <div class="category-header" id="sensations-header">
            <span class="emoji">🎢</span> Sensations fortes
            <span class="easter-egg-tooltip">Comme quand Obélix tombe dans la marmite !</span>
        </div>
        {% if sensations %}
            {% for ride in sensations %}
                <div class="ride">
                    <div class="ride-top">
                        <span class="ride-name">{{ ride.name }}</span>
                        <span class="wait {% if ride.is_open %}open{% else %}closed{% endif %}">
                            {% if ride.is_open %}
                                <i class="fas fa-clock"></i> {{ ride.wait_time }} min
                            {% else %}
                                <i class="fas fa-times-circle"></i> Fermé
                            {% endif %}
                        </span>
                    </div>
                    <div class="difficulty">
                        {% if ride.name == "Toutatis" %}
                            <span class="difficulty-extreme">🔴 Extrême (lancement, 107 km/h)</span>
                        {% elif ride.name == "OzIris" or ride.name == "Tonnerre 2 Zeus" %}
                            <span class="difficulty-hard">🔴 Très fort</span>
                        {% elif ride.name == "Goudurix" or ride.name == "Discobélix" or ride.name == "La Trace du Hourra" %}
                            <span class="difficulty-hard">🔴 Fort</span>
                        {% elif ride.name == "La Galère" or ride.name == "Le Cheval de Troie" or ride.name == "Les Chaises Volantes" %}
                            <span class="difficulty-medium">🟡 Moyen</span>
                        {% else %}
                            <span class="difficulty-easy">🟢 Facile</span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="ride">Aucune donnée disponible</div>
        {% endif %}
    </div>

    <div class="category" data-category="familles">
        <div class="category-header" id="familles-header">
            <span class="emoji">👨‍👩‍👧‍👦</span> Attractions familiales
            <span class="easter-egg-tooltip">Idéal pour Astérix et ses amis (sauf Assurancetourix, on l'a laissé attaché à un arbre)</span>
        </div>
        {% if familles %}
            {% for ride in familles %}
                <div class="ride">
                    <div class="ride-top">
                        <span class="ride-name">{{ ride.name }}</span>
                        <span class="wait {% if ride.is_open %}open{% else %}closed{% endif %}">
                            {% if ride.is_open %}
                                <i class="fas fa-clock"></i> {{ ride.wait_time }} min
                            {% else %}
                                <i class="fas fa-times-circle"></i> Fermé
                            {% endif %}
                        </span>
                    </div>
                    <div class="difficulty">
                        {% if ride.name == "Pégase Express" or ride.name == "Le Vol d'Icare" or ride.name == "L'Oxygénarium" or ride.name == "Menhir Express" or ride.name == "Romus et Rapidus" or ride.name == "La revanche des pirates - Le Grand Splatch" %}
                            <span class="difficulty-medium">🟡 Moyen</span>
                        {% elif ride.name == "L'Hydre de Lerne" or ride.name == "La Petite Tempête" %}
                            <span class="difficulty-medium">🟡 Moyen (manège tournant)</span>
                        {% else %}
                            <span class="difficulty-easy">🟢 Facile</span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="ride">Aucune donnée disponible</div>
        {% endif %}
    </div>

    <div class="category" data-category="enfants">
        <div class="category-header" id="enfants-header">
            <span class="emoji">🧒</span> Petits Gaulois
            <span class="easter-egg-tooltip">Pour les petits qui n'ont pas encore bu de potion magique</span>
        </div>
        {% if enfants %}
            {% for ride in enfants %}
                <div class="ride">
                    <div class="ride-top">
                        <span class="ride-name">{{ ride.name }}</span>
                        <span class="wait {% if ride.is_open %}open{% else %}closed{% endif %}">
                            {% if ride.is_open %}
                                <i class="fas fa-clock"></i> {{ ride.wait_time }} min
                            {% else %}
                                <i class="fas fa-times-circle"></i> Fermé
                            {% endif %}
                        </span>
                    </div>
                    <div class="difficulty">
                        <span class="difficulty-easy">🟢 Très facile</span>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="ride">Aucune donnée disponible</div>
        {% endif %}
    </div>

    <div class="category" data-category="autres">
        <div class="category-header" id="autres-header">
            <span class="emoji">🏛️</span> Autres attractions
            <span class="easter-egg-tooltip">Même les Romains peuvent y aller (mais ils risquent de prendre une baffe d'Obélix)</span>
        </div>
        {% if autres %}
            {% for ride in autres %}
                <div class="ride">
                    <div class="ride-top">
                        <span class="ride-name">{{ ride.name }}</span>
                        <span class="wait {% if ride.is_open %}open{% else %}closed{% endif %}">
                            {% if ride.is_open %}
                                <i class="fas fa-clock"></i> {{ ride.wait_time }} min
                            {% else %}
                                <i class="fas fa-times-circle"></i> Fermé
                            {% endif %}
                        </span>
                    </div>
                    <div class="difficulty">
                        {% if ride.name == "La Colère d'Anubis" or ride.name == "La maison de la Peur" or ride.name == "Le tombeau des Dieux" or ride.name == "Mission Perdue" or ride.name == "The Catacombs" %}
                            <span class="difficulty-hard">🔴 Fort</span>
                        {% elif ride.name == "La tour de Numérobis" %}
                            <span class="difficulty-medium">🟡 Moyen (petite chute)</span>
                        {% else %}
                            <span class="difficulty-easy">🟢 Très facile</span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="ride">Aucune donnée disponible</div>
        {% endif %}
    </div>
    <script>
        // Mode sombre
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const body = document.body;
        
        // Vérifier si le mode sombre est déjà activé dans localStorage
        if (localStorage.getItem('darkMode') === 'true') {
            body.classList.add('dark-mode');
            darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
        
        darkModeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
            darkModeToggle.innerHTML = isDarkMode ? 
                '<i class="fas fa-sun"></i>' : 
                '<i class="fas fa-moon"></i>';
        });
        
        // Recherche
        const searchInput = document.getElementById('search-input');
        const rides = document.querySelectorAll('.ride');
        
        searchInput.addEventListener('input', () => {
            const searchTerm = searchInput.value.toLowerCase();
            
            rides.forEach(ride => {
                const rideName = ride.querySelector('.ride-name').textContent.toLowerCase();
                if (rideName.includes(searchTerm)) {
                    ride.classList.remove('hidden');
                } else {
                    ride.classList.add('hidden');
                }
            });
        });
        
        // Filtrage
        const filterButtons = document.querySelectorAll('.filter-btn');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Retirer la classe active de tous les boutons
                filterButtons.forEach(btn => btn.classList.remove('active'));
                
                // Ajouter la classe active au bouton cliqué
                button.classList.add('active');
                
                const sortType = button.getAttribute('data-sort');
                
                // Réinitialiser la recherche
                searchInput.value = '';
                rides.forEach(ride => ride.classList.remove('hidden'));
                
                // Trier les attractions dans chaque catégorie
                const categories = document.querySelectorAll('.category');
                
                categories.forEach(category => {
                    const categoryRides = Array.from(category.querySelectorAll('.ride:not(.hidden)'));
                    
                    if (sortType === 'wait') {
                        categoryRides.sort((a, b) => {
                            const aWait = parseInt(a.querySelector('.wait').textContent.match(/\d+/) || '999');
                            const bWait = parseInt(b.querySelector('.wait').textContent.match(/\d+/) || '999');
                            return aWait - bWait;
                        });
                    } else if (sortType === 'difficulty') {
                        const difficultyOrder = {
                            'Très facile': 1,
                            'Facile': 2,
                            'Moyen': 3,
                            'Fort': 4,
                            'Très fort': 5,
                            'Extrême': 6
                        };
                        
                        categoryRides.sort((a, b) => {
                            const aDiffText = a.querySelector('.difficulty').textContent.trim();
                            const bDiffText = b.querySelector('.difficulty').textContent.trim();
                            
                            let aDiff = 0;
                            let bDiff = 0;
                            
                            Object.keys(difficultyOrder).forEach(key => {
                                if (aDiffText.includes(key)) aDiff = difficultyOrder[key];
                                if (bDiffText.includes(key)) bDiff = difficultyOrder[key];
                            });
                            
                            return aDiff - bDiff;
                        });
                    }
                    
                    // Réinsérer les éléments triés
                    categoryRides.forEach(ride => {
                        category.appendChild(ride);
                    });
                });
            });
        });
        
        // Filtrage par catégorie
        const categoryButtons = document.querySelectorAll('.category-btn');
        const categories = document.querySelectorAll('.category');
        
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Retirer la classe active de tous les boutons
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                
                // Ajouter la classe active au bouton cliqué
                button.classList.add('active');
                
                const categoryType = button.getAttribute('data-category');
                
                // Afficher/masquer les catégories en fonction du filtre
                if (categoryType === 'all') {
                    // Afficher toutes les catégories
                    categories.forEach(category => {
                        category.style.display = 'block';
                    });
                } else {
                    // Masquer toutes les catégories d'abord
                    categories.forEach(category => {
                        category.style.display = 'none';
                    });
                    
                    // Afficher uniquement la catégorie sélectionnée
                    const selectedCategory = document.querySelector(`.category[data-category="${categoryType}"]`);
                    if (selectedCategory) {
                        selectedCategory.style.display = 'block';
                    }
                }
            });
        });
        
        // Rafraîchissement automatique
        const autoRefreshToggle = document.getElementById('auto-refresh-toggle');
        let refreshInterval;
        let countdownInterval;
        
        // Vérifier si le rafraîchissement automatique était activé précédemment
        if (localStorage.getItem('autoRefresh') === 'true') {
            startAutoRefresh();
            autoRefreshToggle.classList.add('active');
            autoRefreshToggle.innerHTML = '<i class="fas fa-clock"></i> <span class="auto-refresh-indicator">120s</span>';
        }
        
        autoRefreshToggle.addEventListener('click', () => {
            const isActive = autoRefreshToggle.classList.contains('active');
            
            if (isActive) {
                // Désactiver le rafraîchissement automatique
                stopAutoRefresh();
                autoRefreshToggle.classList.remove('active');
                autoRefreshToggle.innerHTML = '<i class="fas fa-clock"></i>';
                localStorage.setItem('autoRefresh', 'false');
            } else {
                // Activer le rafraîchissement automatique
                startAutoRefresh();
                autoRefreshToggle.classList.add('active');
                autoRefreshToggle.innerHTML = '<i class="fas fa-clock"></i> <span class="auto-refresh-indicator">120s</span>';
                localStorage.setItem('autoRefresh', 'true');
            }
        });
        
        function startAutoRefresh() {
            // Rafraîchir toutes les 2 minutes (120000 ms)
            refreshInterval = setInterval(() => {
                window.location.reload();
            }, 120000);
            
            // Ajouter un compte à rebours visuel
            updateRefreshCountdown(120);
        }
        
        function stopAutoRefresh() {
            clearInterval(refreshInterval);
            clearInterval(countdownInterval);
        }
        
        function updateRefreshCountdown(seconds) {
            const indicator = document.querySelector('.auto-refresh-indicator');
            if (!indicator) return;
            
            let remaining = seconds;
            
            indicator.textContent = `${remaining}s`;
            
            countdownInterval = setInterval(() => {
                remaining--;
                indicator.textContent = `${remaining}s`;
                
                if (remaining <= 0) {
                    clearInterval(countdownInterval);
                }
            }, 1000);
        }
        
        // Données des attractions
        const attractionData = {
            "Discobélix": {
                level: "Fort",
                levelClass: "strong",
                description: "Inspirée de l'univers d'Obélix, cette attraction te propulse sur un gigantesque disque qui oscille d'un côté à l'autre tout en tournant sur lui-même. L'effet combiné du balancement et de la rotation donne une sensation de perte de repères et de vertige modéré, parfaite pour ceux qui aiment se faire un peu secouer sans loopings extrêmes. Accessible mais décoiffant !"
            },
            "Goudurix": {
                level: "Fort",
                levelClass: "strong",
                description: "Un des grands huit les plus anciens du Parc Astérix, mais toujours aussi impressionnant ! Il enchaîne pas moins de 7 inversions (loopings, vrilles...) à une vitesse soutenue. C'est un véritable classique pour les amateurs de sensations fortes, bien que certains puissent le trouver un peu secouant. À éviter après le déjeuner !"
            },
            "La Galère": {
                level: "Moyen",
                levelClass: "medium",
                description: "Tu embarques à bord d'un grand bateau viking qui se balance de plus en plus haut, jusqu'à flirter avec la verticalité. L'attraction ne fait pas de vrilles ni de descentes violentes, mais procure une sensation de vide dans l'estomac à chaque passage au sommet. Une bonne entrée en matière dans les sensations."
            },
            "La Trace du Hourra": {
                level: "Fort",
                levelClass: "strong",
                description: "Ce coaster unique simule une descente en bobsleigh… mais sans rails ! Tu glisses à grande vitesse dans un canal en béton, avec de nombreux virages relevés et des chutes surprenantes. Le tout dans un décor préhistorique. Une sensation très fluide et différente des coasters classiques, mais qui monte en intensité."
            },
            "Le Cheval de Troie": {
                level: "Moyen",
                levelClass: "medium",
                description: "Une tour de chute familiale. Tu montes lentement avant d'être relâché par à-coups dans une série de petites descentes. Ce n'est pas une vraie chute libre, mais plutôt une série de rebonds qui donne des sensations rigolotes dans le ventre, surtout pour les plus jeunes ou ceux qui débutent dans les attractions à sensation."
            },
            "Les Chaises Volantes": {
                level: "Moyen",
                levelClass: "medium",
                description: "Assis sur une chaise suspendue par des chaînes, tu t'élèves dans les airs pendant que la structure tourne. La sensation est douce, aérienne, avec un peu de vitesse selon l'intensité. C'est une attraction accessible à presque tous, idéale pour une pause détente entre deux manèges plus remuants."
            },
            "OzIris": {
                level: "Très fort",
                levelClass: "very-strong",
                description: "Un des fleurons du parc ! Ce grand huit inversé (les pieds dans le vide) t'emmène à plus de 90 km/h dans une succession de loopings, vrilles et passages près du sol. Le tout dans un décor spectaculaire digne d'un film d'aventure égyptien. Fluide, intense et spectaculaire : une des meilleures sensations du parc."
            },
            "Tonnerre 2 Zeus": {
                level: "Très fort",
                levelClass: "very-strong",
                description: "C'est un grand huit en bois entièrement repensé en 2022. Il offre des airtimes incroyables (moments où tu décolles du siège), des virages très inclinés et une vitesse qui ne faiblit jamais. Le bruit du bois qui craque sous les roues amplifie les sensations. Un must pour les amateurs de coasters puissants et dynamiques."
            },
            "Toutatis": {
                level: "Extrême (Lancement 107 km/h)",
                levelClass: "extreme",
                description: "C'est la dernière nouveauté du parc et de loin l'attraction la plus intense. Tu es propulsé à 107 km/h en quelques secondes avec un système de lancement magnétique, puis tu enchaînes des airtimes à répétition, des inversions, des vrilles et même un top hat culminant à 51 mètres. C'est du très haut niveau, réservé aux vrais amateurs de sensations extrêmes."
            }
        };
        
        // Gestion des pop-ups d'attractions
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('attraction-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalLevel = document.getElementById('modal-level');
            const modalDescription = document.getElementById('modal-description');
            const modalClose = document.querySelector('.modal-close');
            
            // Ajouter des écouteurs d'événements à toutes les attractions
            document.querySelectorAll('.ride').forEach(ride => {
                ride.addEventListener('click', () => {
                    const rideName = ride.querySelector('.ride-name').textContent;
                    
                    // Vérifier si nous avons des données pour cette attraction
                    if (attractionData[rideName]) {
                        const data = attractionData[rideName];
                        
                        // Remplir le modal avec les données de l'attraction
                        modalTitle.textContent = rideName;
                        modalLevel.textContent = `➡️ Niveau de sensation : ${data.level}`;
                        modalLevel.className = `modal-level ${data.levelClass}`;
                        modalDescription.textContent = data.description;
                        
                        // Afficher le modal
                        modal.style.display = 'flex';
                    }
                });
            });
            
            // Fermer le modal quand on clique sur le bouton de fermeture
            modalClose.addEventListener('click', () => {
                modal.style.display = 'none';
            });
            
            // Fermer le modal quand on clique en dehors du contenu
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Fermer le modal avec la touche Echap
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && modal.style.display === 'flex') {
                    modal.style.display = 'none';
                }
            });
            
            // Blagues cachées et easter eggs
            // Effet de potion magique
            const potionJoke = document.getElementById('potion-joke');
            if (potionJoke) {
                potionJoke.addEventListener('click', () => {
                    // Ajouter l'effet de potion magique à toute la page
                    document.body.classList.add('potion-active');
                    
                    // Message aléatoire après avoir bu la potion
                    const messages = [
                        "Mmmm, délicieux ! Vous vous sentez plus fort !",
                        "Par Toutatis ! Quelle force !",
                        "Attention aux Romains !",
                        "Astérix serait fier de vous !",
                        "Obélix est jaloux, il n'a pas le droit d'en boire !"
                    ];
                    
                    alert(messages[Math.floor(Math.random() * messages.length)]);
                    
                    // Retirer l'effet après l'animation
                    setTimeout(() => {
                        document.body.classList.remove('potion-active');
                    }, 500);
                });
            }
            
            // Easter egg dans la barre de recherche
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                const easterEggWords = ['panoramix', 'obelix', 'asterix', 'idefix', 'potion'];
                
                searchInput.addEventListener('input', () => {
                    const value = searchInput.value.toLowerCase();
                    
                    for (const word of easterEggWords) {
                        if (value.includes(word)) {
                            // Déclencher un easter egg spécifique au mot
                            switch(word) {
                                case 'panoramix':
                                    searchInput.placeholder = "Le druide est occupé à préparer la potion...";
                                    break;
                                case 'obelix':
                                    searchInput.placeholder = "Il est tombé dans la marmite quand il était petit !";
                                    break;
                                case 'asterix':
                                    searchInput.placeholder = "Le plus rusé des Gaulois !";
                                    break;
                                case 'idefix':
                                    searchInput.placeholder = "Wouaf ! Wouaf !";
                                    break;
                                case 'potion':
                                    searchInput.placeholder = "Recette secrète, ne pas divulguer aux Romains !";
                                    break;
                            }
                            
                            // Réinitialiser le placeholder après 3 secondes
                            setTimeout(() => {
                                searchInput.placeholder = "Chercher un Romain... euh, une attraction...";
                            }, 3000);
                            
                            break; // Sortir de la boucle après avoir trouvé un mot
                        }
                    }
                });
            }
        });
    </script>
    <!-- Modal pour les descriptions d'attractions -->
    <div class="modal-overlay" id="attraction-modal">
        <div class="modal">
            <div class="modal-close">
                <i class="fas fa-times"></i>
            </div>
            <h3 class="modal-title" id="modal-title"></h3>
            <span class="modal-level" id="modal-level"></span>
            <p class="modal-description" id="modal-description"></p>
        </div>
    </div>
</body>
</html>